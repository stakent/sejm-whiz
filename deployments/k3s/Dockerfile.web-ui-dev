FROM python:3.12-slim

# Install dependencies at build time to avoid network issues at runtime
RUN pip install --no-cache-dir fastapi uvicorn[standard] httpx pydantic python-multipart

# Set working directory
WORKDIR /app

# Set Python path
ENV PYTHONPATH="/app:/app/components:/app/bases:/app/projects/web_ui"

# Create entrypoint script
RUN echo '#!/bin/bash\necho "ðŸš€ Starting web UI with auto-reload..."\ncd /app/projects/web_ui\nuvicorn main:app --host 0.0.0.0 --port 8000 --reload --reload-dir /app' > /start.sh && chmod +x /start.sh

# Expose port
EXPOSE 8000

# Start the application
CMD ["/start.sh"]
